"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "main";
exports.ids = null;
exports.modules = {

/***/ "./src/plugins/scaffolder/actions/ro-insiel.ts":
/*!*****************************************************!*\
  !*** ./src/plugins/scaffolder/actions/ro-insiel.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createRoInsielAction\": () => (/* binding */ createRoInsielAction)\n/* harmony export */ });\n/* harmony import */ var _backstage_plugin_scaffolder_backend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @backstage/plugin-scaffolder-backend */ \"../../plugins/scaffolder-backend/src/index.ts\");\n/* harmony import */ var _backstage_backend_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @backstage/backend-common */ \"../backend-common/src/index.ts\");\n/* module decorator */ module = __webpack_require__.hmd(module);\n(function () { var enterModule = (__webpack_require__(/*! react-hot-loader */ \"react-hot-loader\").enterModule); enterModule && enterModule(module); })();/*\n * Copyright 2022 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\nconst git = __webpack_require__(/*! isomorphic-git */ \"isomorphic-git?7761\");\nconst http = __webpack_require__(/*! isomorphic-git/http/node */ \"isomorphic-git/http/node?5755\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst path = __webpack_require__(/*! path */ \"path\");\nconst nunjucks = __webpack_require__(/*! nunjucks */ \"nunjucks\");\nconst { Octokit } = __webpack_require__(/*! @octokit/rest */ \"@octokit/rest?e034\");\n\nconst util = __webpack_require__(/*! util */ \"util\");\n\nconst getAllFiles = (dirPath, arrayOfFiles) => {\n  const files = fs.readdirSync(dirPath);\n\n  arrayOfFiles = arrayOfFiles || [];\n\n  files.forEach((file) => {\n    if (file !== '.git') {\n      if (fs.statSync(dirPath + '/' + file).isDirectory()) {\n        arrayOfFiles = getAllFiles(dirPath + '/' + file, arrayOfFiles);\n      } else {\n        arrayOfFiles.push(path.join(dirPath, '/', file));\n      }\n    }\n  });\n\n  return arrayOfFiles;\n};\n\nconst createRoInsielAction = () => {\n  return (0,_backstage_plugin_scaffolder_backend__WEBPACK_IMPORTED_MODULE_0__.createTemplateAction)\n\n\n\n({\n    id: 'krateo:ro-insiel',\n    schema: {\n      input: {\n        required: ['host', 'component_id', 'gitHubUrl'],\n        type: 'object',\n        properties: {\n          host: {\n            type: 'string',\n            title: 'Host',\n            description: 'Host',\n          },\n          component_id: {\n            type: 'string',\n            title: 'Component Id',\n            description: 'Component Id',\n          },\n          gitHubUrl: {\n            type: 'string',\n            title: 'GitHub Url',\n            description: 'GitHub Url',\n          },\n        },\n      },\n    },\n    async handler(ctx) {\n      const fullUrl = `https://${ctx.input.host}`;\n      const url = new URL(fullUrl);\n      const owner = url.searchParams.get('owner');\n      const repo = url.searchParams.get('repo');\n      const base = url.origin;\n      const repoURL = `${base}/${owner}/${repo}`;\n\n      ctx.logger.info(JSON.stringify(ctx.templateInfo?.baseUrl));\n\n      const templateUrl = ctx.baseUrl.replace('/tree/main/', '');\n\n      const workDir = await ctx.createTemporaryDirectory();\n      const helmDir = (0,_backstage_backend_common__WEBPACK_IMPORTED_MODULE_1__.resolveSafeChildPath)(workDir, 'helm-chart');\n\n      ctx.logger.info(`Created temporary directory: ${workDir}`);\n      ctx.logger.info(`Helm directory: ${helmDir}`);\n\n      await git.clone({\n        fs,\n        http,\n        dir: workDir,\n        url: templateUrl,\n        onAuth: () => ({ username: process.env.GITHUB_TOKEN }),\n        ref: 'main',\n        singleBranch: true,\n        depth: 1,\n      });\n\n      // template\n      const files = getAllFiles(helmDir, null);\n      nunjucks.configure(helmDir, {\n        noCache: true,\n        autoescape: true,\n        tags: { variableStart: '${{' },\n      });\n      files.forEach((f) => {\n        const original = fs.readFileSync(f, { encoding: 'base64' });\n\n        if (original.length > 0) {\n          ctx.logger.info(`Processing file: ${f}`);\n          const modified = nunjucks.render(f.replace(`${helmDir}/`, ''), {\n            component_id: ctx.input.component_id,\n          });\n\n          if (original !== Buffer.from(modified, 'utf-8').toString('base64')) {\n            fs.writeFileSync(f, modified, { encoding: 'utf-8' });\n          }\n        }\n      });\n\n      // check if is organization\n      const octokit = new Octokit({\n        auth: process.env.GITHUB_TOKEN,\n        baseUrl: ctx.input.gitHubUrl,\n      });\n      let isOrganization = false;\n      try {\n        await octokit.rest.repos.listForOrg({\n          org: owner,\n        });\n        isOrganization = true;\n        ctx.logger.info(`Destination repo is org`);\n      } catch (err) {\n        ctx.logger.info(`Destination repo is not org`);\n      }\n\n      // push repo\n      ctx.logger.info(`${repoURL}-hc`);\n      if (isOrganization) {\n        await octokit.rest.repos.createInOrg({\n          org: owner,\n          name: `${repo}-hc`,\n        });\n        await octokit.rest.repos.createInOrg({\n          org: owner,\n          name: `${repo}-keptn`,\n        });\n      } else {\n        await octokit.rest.repos.createForAuthenticatedUser({\n          name: `${repo}-hc`,\n        });\n        await octokit.rest.repos.createForAuthenticatedUser({\n          name: `${repo}-keptn`,\n        });\n      }\n      ctx.logger.info(`Created repository: ${repoURL}-hc`);\n      ctx.logger.info(`Created repository: ${repoURL}-keptn`);\n\n      await git.init({ fs, dir: helmDir, defaultBranch: 'main' });\n      ctx.logger.info(`Init`);\n      await git.add({ fs, dir: helmDir, filepath: '.' });\n      ctx.logger.info(`Add *`);\n      await git.commit({\n        fs,\n        dir: helmDir,\n        author: {\n          name: 'Scaffolder',\n          email: '',\n        },\n        message: 'initial commit',\n      });\n      ctx.logger.info(`Commit`);\n      await git.addRemote({\n        fs,\n        dir: helmDir,\n        remote: 'origin',\n        url: `${repoURL}-hc.git`,\n      });\n      ctx.logger.info(`Add remote ${repoURL}-hc.git`);\n      await git\n        .push({\n          fs,\n          http,\n          dir: helmDir,\n          remote: 'origin',\n          ref: 'main',\n          onAuth: () => ({ username: process.env.GITHUB_TOKEN }),\n          onProgress: (state) => {\n            try {\n              ctx.logger.info(`Pushing ${state.phase}`);\n            } catch (e) {\n              ctx.logger.error(e);\n            }\n          },\n        })\n        .catch((err) => {\n          ctx.logger.error(`‚ùå Push progress failed: ${err}`);\n        });\n      ctx.logger.info(`Push`);\n\n      ctx.logger.info(`Well done, pushed successfully!`);\n    },\n  });\n};\n\n;(function () {\n  var reactHotLoader = (__webpack_require__(/*! react-hot-loader */ \"react-hot-loader\")[\"default\"]);\n  var leaveModule = (__webpack_require__(/*! react-hot-loader */ \"react-hot-loader\").leaveModule);\n  if (!reactHotLoader) {\n    return;\n  }\n  reactHotLoader.register(git, \"git\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(http, \"http\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(fs, \"fs\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(path, \"path\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(nunjucks, \"nunjucks\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(Octokit, \"Octokit\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(util, \"util\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(getAllFiles, \"getAllFiles\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  reactHotLoader.register(createRoInsielAction, \"createRoInsielAction\", \"/Users/maurosala/Dev/github/krateoplatformops/krateo-dashboard-backend/packages/backend/src/plugins/scaffolder/actions/ro-insiel.ts\");\n  leaveModule(module);\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGx1Z2lucy9zY2FmZm9sZGVyL2FjdGlvbnMvcm8taW5zaWVsLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbImZpbGU6Ly8vL1VzZXJzL21hdXJvc2FsYS9EZXYvZ2l0aHViL2tyYXRlb3BsYXRmb3Jtb3BzL2tyYXRlby1kYXNoYm9hcmQtYmFja2VuZC9wYWNrYWdlcy9iYWNrZW5kL3NyYy9wbHVnaW5zL3NjYWZmb2xkZXIvYWN0aW9ucy9yby1pbnNpZWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHsgdmFyIGVudGVyTW9kdWxlID0gcmVxdWlyZSgncmVhY3QtaG90LWxvYWRlcicpLmVudGVyTW9kdWxlOyBlbnRlck1vZHVsZSAmJiBlbnRlck1vZHVsZShtb2R1bGUpOyB9KSgpOy8qXG4gKiBDb3B5cmlnaHQgMjAyMiBUaGUgQmFja3N0YWdlIEF1dGhvcnNcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlVGVtcGxhdGVBY3Rpb24gfSBmcm9tICdAYmFja3N0YWdlL3BsdWdpbi1zY2FmZm9sZGVyLWJhY2tlbmQnO1xuaW1wb3J0IHsgcmVzb2x2ZVNhZmVDaGlsZFBhdGggfSBmcm9tICdAYmFja3N0YWdlL2JhY2tlbmQtY29tbW9uJztcbmNvbnN0IGdpdCA9IHJlcXVpcmUoJ2lzb21vcnBoaWMtZ2l0Jyk7XG5jb25zdCBodHRwID0gcmVxdWlyZSgnaXNvbW9ycGhpYy1naXQvaHR0cC9ub2RlJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgbnVuanVja3MgPSByZXF1aXJlKCdudW5qdWNrcycpO1xuY29uc3QgeyBPY3Rva2l0IH0gPSByZXF1aXJlKCdAb2N0b2tpdC9yZXN0Jyk7XG5cbmNvbnN0IHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbmNvbnN0IGdldEFsbEZpbGVzID0gKGRpclBhdGgsIGFycmF5T2ZGaWxlcykgPT4ge1xuICBjb25zdCBmaWxlcyA9IGZzLnJlYWRkaXJTeW5jKGRpclBhdGgpO1xuXG4gIGFycmF5T2ZGaWxlcyA9IGFycmF5T2ZGaWxlcyB8fCBbXTtcblxuICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgaWYgKGZpbGUgIT09ICcuZ2l0Jykge1xuICAgICAgaWYgKGZzLnN0YXRTeW5jKGRpclBhdGggKyAnLycgKyBmaWxlKS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIGFycmF5T2ZGaWxlcyA9IGdldEFsbEZpbGVzKGRpclBhdGggKyAnLycgKyBmaWxlLCBhcnJheU9mRmlsZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJyYXlPZkZpbGVzLnB1c2gocGF0aC5qb2luKGRpclBhdGgsICcvJywgZmlsZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFycmF5T2ZGaWxlcztcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSb0luc2llbEFjdGlvbiA9ICgpID0+IHtcbiAgcmV0dXJuIGNyZWF0ZVRlbXBsYXRlQWN0aW9uXG5cblxuXG4oe1xuICAgIGlkOiAna3JhdGVvOnJvLWluc2llbCcsXG4gICAgc2NoZW1hOiB7XG4gICAgICBpbnB1dDoge1xuICAgICAgICByZXF1aXJlZDogWydob3N0JywgJ2NvbXBvbmVudF9pZCcsICdnaXRIdWJVcmwnXSxcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHRpdGxlOiAnSG9zdCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0hvc3QnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcG9uZW50X2lkOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHRpdGxlOiAnQ29tcG9uZW50IElkJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcG9uZW50IElkJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdpdEh1YlVybDoge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB0aXRsZTogJ0dpdEh1YiBVcmwnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHaXRIdWIgVXJsJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGFzeW5jIGhhbmRsZXIoY3R4KSB7XG4gICAgICBjb25zdCBmdWxsVXJsID0gYGh0dHBzOi8vJHtjdHguaW5wdXQuaG9zdH1gO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChmdWxsVXJsKTtcbiAgICAgIGNvbnN0IG93bmVyID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ293bmVyJyk7XG4gICAgICBjb25zdCByZXBvID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3JlcG8nKTtcbiAgICAgIGNvbnN0IGJhc2UgPSB1cmwub3JpZ2luO1xuICAgICAgY29uc3QgcmVwb1VSTCA9IGAke2Jhc2V9LyR7b3duZXJ9LyR7cmVwb31gO1xuXG4gICAgICBjdHgubG9nZ2VyLmluZm8oSlNPTi5zdHJpbmdpZnkoY3R4LnRlbXBsYXRlSW5mbz8uYmFzZVVybCkpO1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZVVybCA9IGN0eC5iYXNlVXJsLnJlcGxhY2UoJy90cmVlL21haW4vJywgJycpO1xuXG4gICAgICBjb25zdCB3b3JrRGlyID0gYXdhaXQgY3R4LmNyZWF0ZVRlbXBvcmFyeURpcmVjdG9yeSgpO1xuICAgICAgY29uc3QgaGVsbURpciA9IHJlc29sdmVTYWZlQ2hpbGRQYXRoKHdvcmtEaXIsICdoZWxtLWNoYXJ0Jyk7XG5cbiAgICAgIGN0eC5sb2dnZXIuaW5mbyhgQ3JlYXRlZCB0ZW1wb3JhcnkgZGlyZWN0b3J5OiAke3dvcmtEaXJ9YCk7XG4gICAgICBjdHgubG9nZ2VyLmluZm8oYEhlbG0gZGlyZWN0b3J5OiAke2hlbG1EaXJ9YCk7XG5cbiAgICAgIGF3YWl0IGdpdC5jbG9uZSh7XG4gICAgICAgIGZzLFxuICAgICAgICBodHRwLFxuICAgICAgICBkaXI6IHdvcmtEaXIsXG4gICAgICAgIHVybDogdGVtcGxhdGVVcmwsXG4gICAgICAgIG9uQXV0aDogKCkgPT4gKHsgdXNlcm5hbWU6IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTiB9KSxcbiAgICAgICAgcmVmOiAnbWFpbicsXG4gICAgICAgIHNpbmdsZUJyYW5jaDogdHJ1ZSxcbiAgICAgICAgZGVwdGg6IDEsXG4gICAgICB9KTtcblxuICAgICAgLy8gdGVtcGxhdGVcbiAgICAgIGNvbnN0IGZpbGVzID0gZ2V0QWxsRmlsZXMoaGVsbURpciwgbnVsbCk7XG4gICAgICBudW5qdWNrcy5jb25maWd1cmUoaGVsbURpciwge1xuICAgICAgICBub0NhY2hlOiB0cnVlLFxuICAgICAgICBhdXRvZXNjYXBlOiB0cnVlLFxuICAgICAgICB0YWdzOiB7IHZhcmlhYmxlU3RhcnQ6ICcke3snIH0sXG4gICAgICB9KTtcbiAgICAgIGZpbGVzLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBmcy5yZWFkRmlsZVN5bmMoZiwgeyBlbmNvZGluZzogJ2Jhc2U2NCcgfSk7XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjdHgubG9nZ2VyLmluZm8oYFByb2Nlc3NpbmcgZmlsZTogJHtmfWApO1xuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkID0gbnVuanVja3MucmVuZGVyKGYucmVwbGFjZShgJHtoZWxtRGlyfS9gLCAnJyksIHtcbiAgICAgICAgICAgIGNvbXBvbmVudF9pZDogY3R4LmlucHV0LmNvbXBvbmVudF9pZCxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChvcmlnaW5hbCAhPT0gQnVmZmVyLmZyb20obW9kaWZpZWQsICd1dGYtOCcpLnRvU3RyaW5nKCdiYXNlNjQnKSkge1xuICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhmLCBtb2RpZmllZCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBjaGVjayBpZiBpcyBvcmdhbml6YXRpb25cbiAgICAgIGNvbnN0IG9jdG9raXQgPSBuZXcgT2N0b2tpdCh7XG4gICAgICAgIGF1dGg6IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTixcbiAgICAgICAgYmFzZVVybDogY3R4LmlucHV0LmdpdEh1YlVybCxcbiAgICAgIH0pO1xuICAgICAgbGV0IGlzT3JnYW5pemF0aW9uID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBvY3Rva2l0LnJlc3QucmVwb3MubGlzdEZvck9yZyh7XG4gICAgICAgICAgb3JnOiBvd25lcixcbiAgICAgICAgfSk7XG4gICAgICAgIGlzT3JnYW5pemF0aW9uID0gdHJ1ZTtcbiAgICAgICAgY3R4LmxvZ2dlci5pbmZvKGBEZXN0aW5hdGlvbiByZXBvIGlzIG9yZ2ApO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGN0eC5sb2dnZXIuaW5mbyhgRGVzdGluYXRpb24gcmVwbyBpcyBub3Qgb3JnYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHB1c2ggcmVwb1xuICAgICAgY3R4LmxvZ2dlci5pbmZvKGAke3JlcG9VUkx9LWhjYCk7XG4gICAgICBpZiAoaXNPcmdhbml6YXRpb24pIHtcbiAgICAgICAgYXdhaXQgb2N0b2tpdC5yZXN0LnJlcG9zLmNyZWF0ZUluT3JnKHtcbiAgICAgICAgICBvcmc6IG93bmVyLFxuICAgICAgICAgIG5hbWU6IGAke3JlcG99LWhjYCxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IG9jdG9raXQucmVzdC5yZXBvcy5jcmVhdGVJbk9yZyh7XG4gICAgICAgICAgb3JnOiBvd25lcixcbiAgICAgICAgICBuYW1lOiBgJHtyZXBvfS1rZXB0bmAsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgb2N0b2tpdC5yZXN0LnJlcG9zLmNyZWF0ZUZvckF1dGhlbnRpY2F0ZWRVc2VyKHtcbiAgICAgICAgICBuYW1lOiBgJHtyZXBvfS1oY2AsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBvY3Rva2l0LnJlc3QucmVwb3MuY3JlYXRlRm9yQXV0aGVudGljYXRlZFVzZXIoe1xuICAgICAgICAgIG5hbWU6IGAke3JlcG99LWtlcHRuYCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjdHgubG9nZ2VyLmluZm8oYENyZWF0ZWQgcmVwb3NpdG9yeTogJHtyZXBvVVJMfS1oY2ApO1xuICAgICAgY3R4LmxvZ2dlci5pbmZvKGBDcmVhdGVkIHJlcG9zaXRvcnk6ICR7cmVwb1VSTH0ta2VwdG5gKTtcblxuICAgICAgYXdhaXQgZ2l0LmluaXQoeyBmcywgZGlyOiBoZWxtRGlyLCBkZWZhdWx0QnJhbmNoOiAnbWFpbicgfSk7XG4gICAgICBjdHgubG9nZ2VyLmluZm8oYEluaXRgKTtcbiAgICAgIGF3YWl0IGdpdC5hZGQoeyBmcywgZGlyOiBoZWxtRGlyLCBmaWxlcGF0aDogJy4nIH0pO1xuICAgICAgY3R4LmxvZ2dlci5pbmZvKGBBZGQgKmApO1xuICAgICAgYXdhaXQgZ2l0LmNvbW1pdCh7XG4gICAgICAgIGZzLFxuICAgICAgICBkaXI6IGhlbG1EaXIsXG4gICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgIG5hbWU6ICdTY2FmZm9sZGVyJyxcbiAgICAgICAgICBlbWFpbDogJycsXG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6ICdpbml0aWFsIGNvbW1pdCcsXG4gICAgICB9KTtcbiAgICAgIGN0eC5sb2dnZXIuaW5mbyhgQ29tbWl0YCk7XG4gICAgICBhd2FpdCBnaXQuYWRkUmVtb3RlKHtcbiAgICAgICAgZnMsXG4gICAgICAgIGRpcjogaGVsbURpcixcbiAgICAgICAgcmVtb3RlOiAnb3JpZ2luJyxcbiAgICAgICAgdXJsOiBgJHtyZXBvVVJMfS1oYy5naXRgLFxuICAgICAgfSk7XG4gICAgICBjdHgubG9nZ2VyLmluZm8oYEFkZCByZW1vdGUgJHtyZXBvVVJMfS1oYy5naXRgKTtcbiAgICAgIGF3YWl0IGdpdFxuICAgICAgICAucHVzaCh7XG4gICAgICAgICAgZnMsXG4gICAgICAgICAgaHR0cCxcbiAgICAgICAgICBkaXI6IGhlbG1EaXIsXG4gICAgICAgICAgcmVtb3RlOiAnb3JpZ2luJyxcbiAgICAgICAgICByZWY6ICdtYWluJyxcbiAgICAgICAgICBvbkF1dGg6ICgpID0+ICh7IHVzZXJuYW1lOiBwcm9jZXNzLmVudi5HSVRIVUJfVE9LRU4gfSksXG4gICAgICAgICAgb25Qcm9ncmVzczogKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjdHgubG9nZ2VyLmluZm8oYFB1c2hpbmcgJHtzdGF0ZS5waGFzZX1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY3R4LmxvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgIGN0eC5sb2dnZXIuZXJyb3IoYOKdjCBQdXNoIHByb2dyZXNzIGZhaWxlZDogJHtlcnJ9YCk7XG4gICAgICAgIH0pO1xuICAgICAgY3R4LmxvZ2dlci5pbmZvKGBQdXNoYCk7XG5cbiAgICAgIGN0eC5sb2dnZXIuaW5mbyhgV2VsbCBkb25lLCBwdXNoZWQgc3VjY2Vzc2Z1bGx5IWApO1xuICAgIH0sXG4gIH0pO1xufTtcblxuOyhmdW5jdGlvbiAoKSB7XG4gIHZhciByZWFjdEhvdExvYWRlciA9IHJlcXVpcmUoJ3JlYWN0LWhvdC1sb2FkZXInKS5kZWZhdWx0O1xuICB2YXIgbGVhdmVNb2R1bGUgPSByZXF1aXJlKCdyZWFjdC1ob3QtbG9hZGVyJykubGVhdmVNb2R1bGU7XG4gIGlmICghcmVhY3RIb3RMb2FkZXIpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZ2l0LCBcImdpdFwiLCBcIi9Vc2Vycy9tYXVyb3NhbGEvRGV2L2dpdGh1Yi9rcmF0ZW9wbGF0Zm9ybW9wcy9rcmF0ZW8tZGFzaGJvYXJkLWJhY2tlbmQvcGFja2FnZXMvYmFja2VuZC9zcmMvcGx1Z2lucy9zY2FmZm9sZGVyL2FjdGlvbnMvcm8taW5zaWVsLnRzXCIpO1xuICByZWFjdEhvdExvYWRlci5yZWdpc3RlcihodHRwLCBcImh0dHBcIiwgXCIvVXNlcnMvbWF1cm9zYWxhL0Rldi9naXRodWIva3JhdGVvcGxhdGZvcm1vcHMva3JhdGVvLWRhc2hib2FyZC1iYWNrZW5kL3BhY2thZ2VzL2JhY2tlbmQvc3JjL3BsdWdpbnMvc2NhZmZvbGRlci9hY3Rpb25zL3JvLWluc2llbC50c1wiKTtcbiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZnMsIFwiZnNcIiwgXCIvVXNlcnMvbWF1cm9zYWxhL0Rldi9naXRodWIva3JhdGVvcGxhdGZvcm1vcHMva3JhdGVvLWRhc2hib2FyZC1iYWNrZW5kL3BhY2thZ2VzL2JhY2tlbmQvc3JjL3BsdWdpbnMvc2NhZmZvbGRlci9hY3Rpb25zL3JvLWluc2llbC50c1wiKTtcbiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIocGF0aCwgXCJwYXRoXCIsIFwiL1VzZXJzL21hdXJvc2FsYS9EZXYvZ2l0aHViL2tyYXRlb3BsYXRmb3Jtb3BzL2tyYXRlby1kYXNoYm9hcmQtYmFja2VuZC9wYWNrYWdlcy9iYWNrZW5kL3NyYy9wbHVnaW5zL3NjYWZmb2xkZXIvYWN0aW9ucy9yby1pbnNpZWwudHNcIik7XG4gIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKG51bmp1Y2tzLCBcIm51bmp1Y2tzXCIsIFwiL1VzZXJzL21hdXJvc2FsYS9EZXYvZ2l0aHViL2tyYXRlb3BsYXRmb3Jtb3BzL2tyYXRlby1kYXNoYm9hcmQtYmFja2VuZC9wYWNrYWdlcy9iYWNrZW5kL3NyYy9wbHVnaW5zL3NjYWZmb2xkZXIvYWN0aW9ucy9yby1pbnNpZWwudHNcIik7XG4gIHJlYWN0SG90TG9hZGVyLnJlZ2lzdGVyKE9jdG9raXQsIFwiT2N0b2tpdFwiLCBcIi9Vc2Vycy9tYXVyb3NhbGEvRGV2L2dpdGh1Yi9rcmF0ZW9wbGF0Zm9ybW9wcy9rcmF0ZW8tZGFzaGJvYXJkLWJhY2tlbmQvcGFja2FnZXMvYmFja2VuZC9zcmMvcGx1Z2lucy9zY2FmZm9sZGVyL2FjdGlvbnMvcm8taW5zaWVsLnRzXCIpO1xuICByZWFjdEhvdExvYWRlci5yZWdpc3Rlcih1dGlsLCBcInV0aWxcIiwgXCIvVXNlcnMvbWF1cm9zYWxhL0Rldi9naXRodWIva3JhdGVvcGxhdGZvcm1vcHMva3JhdGVvLWRhc2hib2FyZC1iYWNrZW5kL3BhY2thZ2VzL2JhY2tlbmQvc3JjL3BsdWdpbnMvc2NhZmZvbGRlci9hY3Rpb25zL3JvLWluc2llbC50c1wiKTtcbiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoZ2V0QWxsRmlsZXMsIFwiZ2V0QWxsRmlsZXNcIiwgXCIvVXNlcnMvbWF1cm9zYWxhL0Rldi9naXRodWIva3JhdGVvcGxhdGZvcm1vcHMva3JhdGVvLWRhc2hib2FyZC1iYWNrZW5kL3BhY2thZ2VzL2JhY2tlbmQvc3JjL3BsdWdpbnMvc2NhZmZvbGRlci9hY3Rpb25zL3JvLWluc2llbC50c1wiKTtcbiAgcmVhY3RIb3RMb2FkZXIucmVnaXN0ZXIoY3JlYXRlUm9JbnNpZWxBY3Rpb24sIFwiY3JlYXRlUm9JbnNpZWxBY3Rpb25cIiwgXCIvVXNlcnMvbWF1cm9zYWxhL0Rldi9naXRodWIva3JhdGVvcGxhdGZvcm1vcHMva3JhdGVvLWRhc2hib2FyZC1iYWNrZW5kL3BhY2thZ2VzL2JhY2tlbmQvc3JjL3BsdWdpbnMvc2NhZmZvbGRlci9hY3Rpb25zL3JvLWluc2llbC50c1wiKTtcbiAgbGVhdmVNb2R1bGUobW9kdWxlKTtcbn0pKCk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/plugins/scaffolder/actions/ro-insiel.ts\n");

/***/ })

};
exports.runtime =
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("a17ea46f96d5be41a37b")
/******/ })();
/******/ 
/******/ }
;